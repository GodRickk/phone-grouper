# Phone Number Grouper

Программа для группировки телефонных номеров на основе совпадающих значений в одинаковых позициях.

## Описание

Программа читает файл, содержащий строки с телефонными номерами, разделенными точкой с запятой, 
и группирует их по следующему правилу:
если две строки имеют совпадения непустых значений в одной или более колонках -
они принадлежат одной группе.


### Пример входных данных:
"111";"123";"222"

"200";"123";"100"

"300";"";"100"

Эти строки будут в одной группе, так как:
- Первые две строки имеют одинаковое значение "123" во второй колонке
- Две последние строки имеют одинаковое значение "100" в третьей колонке


## Загрузка проекта
```bash
git clone https://github.com/GodRickk/phone-grouper.git
cd phone-grouper/
```


## Сборка проекта

### Через командную строку

Очистка и сборка проекта:
```bash
./gradlew clean build
```

### Через IntelliJ IDEA

1. Откройте вкладку Gradle (справа)
2. Выполните Tasks -> build -> build


## Запуск программы
JAR-файл создается в корневой директории проекта с именем ```phone-grouper.jar```

Запуск осуществляется командой:
```bash
java -Xmx1g -jar phone-grouper.jar "{Полный путь к входному файлу}"
```

## Описание алгоритма
1. Подготовка к обработке:
    - Инициализация потокобезопасных структур данных:
        - ConcurrentHashMap для хранения маппинга значений
        - Синхронизированные коллекции для групп
    - Создание пула потоков


2. Чтение и распределение данных:
    - Файл читается построчно
    - Строки группируются в батчи по 500 строк
    - Каждый батч отправляется на обработку в отдельном потоке
    - Контроль количества активных задач для оптимизации памяти


3. Обработка батча в потоке:
    - Валидация каждой строки:
    - Для каждой валидной строки:
        - Разбиение на значения по разделителю ";"
        - Создание ключей вида "значение:позиция" для непустых значений
        - Поиск совпадений в существующих группах


4. Группировка (синхронизированная):
    - При наличии совпадений:
        - Добавление строки в существующую группу
        - Объединение пересекающихся групп
    - При отсутствии совпадений:
        - Создание новой группы
    - Обновление индекса значений


5. Формирование результата:
    - Фильтрация групп (размер > 1)
    - Сортировка по убыванию размера
    - Запись в output.txt


## Результаты работы
Программа создает файл:
- output.txt - содержит количество найденных групп с количеством строк > 1 
и сами группы телефонных номеров в порядке убывания количества строк


Программа выводит в консоль:
- Время выполнения
- Количество обработанных строк
- Количество найденных групп
